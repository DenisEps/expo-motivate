{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/d_kuprin/expo-motivate/client/src/navigation/RootNavigator/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TabNavigator from \"../TabNavigator\";\nimport AuthStackScreen from \"../../screens/AuthStackScreen/index\";\nimport RegistrationForm from \"../../components/Auth/RegistrationForm\";\nimport AuthForm from \"../../components/Auth/AuthForm\";\nimport PushNotifications from \"../../components/TestDb/TestPushNotifications\";\nimport Profile from \"../../components/Profile/index\";\nimport StartForm from \"../../components/Auth/StartForm\";\nimport AsyncStorage from '@react-native-community/async-storage';\nimport { userAuth, deleteUser } from \"../../redux/actions\";\nimport { firebase } from \"../../../firebase\";\n\nvar RootNavigator = function RootNavigator() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var dispatch = useDispatch();\n  var auth = useSelector(function (state) {\n    return state.user;\n  });\n  console.log('>>>>AUTH', auth);\n  useEffect(function () {\n    load();\n  }, []);\n\n  var load = function load() {\n    var user, err;\n    return _regeneratorRuntime.async(function load$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.t0 = JSON;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('user'));\n\n          case 4:\n            _context.t1 = _context.sent;\n            user = _context.t0.parse.call(_context.t0, _context.t1);\n            console.log('>>>>>>>>>>>>>>>>>ASYNCSTORAGE', user);\n\n            if (user !== null) {\n              dispatch(userAuth(true));\n            }\n\n            _context.next = 14;\n            break;\n\n          case 10:\n            _context.prev = 10;\n            _context.t2 = _context[\"catch\"](0);\n            err = new Error(_context.t2);\n            setError(err.message);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  };\n\n  return auth ? React.createElement(Profile, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }\n  }) : React.createElement(StartForm, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 31\n    }\n  });\n};\n\nexport default RootNavigator;","map":{"version":3,"sources":["/Users/d_kuprin/expo-motivate/client/src/navigation/RootNavigator/index.js"],"names":["React","useEffect","useState","useDispatch","useSelector","TabNavigator","AuthStackScreen","RegistrationForm","AuthForm","PushNotifications","Profile","StartForm","AsyncStorage","userAuth","deleteUser","firebase","RootNavigator","error","setError","dispatch","auth","state","user","console","log","load","JSON","getItem","parse","err","Error","message"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;;AAGA,OAAOC,YAAP;AACA,OAAOC,eAAP;AACA,OAAOC,gBAAP;AACA,OAAOC,QAAP;AACA,OAAOC,iBAAP;AACA,OAAOC,OAAP;AACA,OAAOC,SAAP;AACA,OAAOC,YAAP,MAAyB,uCAAzB;AACA,SAASC,QAAT,EAAmBC,UAAnB;AACA,SAASC,QAAT;;AAGA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAAA,kBACAd,QAAQ,CAAC,IAAD,CADR;AAAA;AAAA,MACnBe,KADmB;AAAA,MACZC,QADY;;AAE1B,MAAMC,QAAQ,GAAGhB,WAAW,EAA5B;AACA,MAAMiB,IAAI,GAAGhB,WAAW,CAAC,UAAAiB,KAAK;AAAA,WAAIA,KAAK,CAACC,IAAV;AAAA,GAAN,CAAxB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBJ,IAAxB;AAEAnB,EAAAA,SAAS,CAAC,YAAM;AACdwB,IAAAA,IAAI;AACL,GAFQ,EAEN,EAFM,CAAT;;AAIA,MAAMA,IAAI,GAAG,SAAPA,IAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAEIC,IAFJ;AAAA;AAAA,6CAEqBd,YAAY,CAACe,OAAb,CAAqB,MAArB,CAFrB;;AAAA;AAAA;AAEHL,YAAAA,IAFG,eAESM,KAFT;AAITL,YAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CF,IAA7C;;AACA,gBAAIA,IAAI,KAAK,IAAb,EAAmB;AACjBH,cAAAA,QAAQ,CAACN,QAAQ,CAAC,IAAD,CAAT,CAAR;AACD;;AAPQ;AAAA;;AAAA;AAAA;AAAA;AASHgB,YAAAA,GATG,GASG,IAAIC,KAAJ,aATH;AAUTZ,YAAAA,QAAQ,CAACW,GAAG,CAACE,OAAL,CAAR;;AAVS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAb;;AAcA,SAAOX,IAAI,GAAG,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAAiB,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA5B;AACD,CAzBD;;AA2BA,eAAeJ,aAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from 'react-redux'\nimport { SafeAreaView } from \"react-native\";\n\nimport TabNavigator from \"../TabNavigator\";\nimport AuthStackScreen from \"../../screens/AuthStackScreen/index\";\nimport RegistrationForm from \"../../components/Auth/RegistrationForm\";\nimport AuthForm from '../../components/Auth/AuthForm'\nimport PushNotifications from '../../components/TestDb/TestPushNotifications'\nimport Profile from '../../components/Profile/index'\nimport StartForm from '../../components/Auth/StartForm'\nimport AsyncStorage from '@react-native-community/async-storage';\nimport { userAuth, deleteUser } from \"../../redux/actions\";\nimport { firebase } from '../../../firebase'\n\n\nconst RootNavigator = () => {\n  const [error, setError] = useState(null);\n  const dispatch = useDispatch();\n  const auth = useSelector(state => state.user);\n  console.log('>>>>AUTH', auth);\n\n  useEffect(() => {\n    load();\n  }, [])\n\n  const load = async () => {\n    try {\n      const user = JSON.parse(await AsyncStorage.getItem('user'));\n\n      console.log('>>>>>>>>>>>>>>>>>ASYNCSTORAGE', user);\n      if (user !== null) {\n        dispatch(userAuth(true));\n      }\n    } catch (error) {\n      const err = new Error(error)\n      setError(err.message);\n    }\n  }\n  // return <AuthForm />\n  return auth ? <Profile /> : <StartForm />;\n};\n\nexport default RootNavigator;\n"]},"metadata":{},"sourceType":"module"}